#!/bin/bash

echo "ğŸ”¥ FIREBASE & FACEBOOK SDK INSTALLER"
echo "===================================="
echo ""

# Check if we're in the scripts directory and navigate to PCPOScompanion
if [ -f "../PCPOScompanion/PCPOScompanion.xcodeproj/project.pbxproj" ]; then
    cd ../PCPOScompanion
    echo "âœ… Navigated to PCPOScompanion directory"
elif [ -f "PCPOScompanion.xcodeproj/project.pbxproj" ]; then
    echo "âœ… Already in PCPOScompanion directory"
else
    echo "âŒ Error: Cannot find PCPOScompanion.xcodeproj"
    echo "Please run from either:"
    echo "  - /Users/pcpos/Desktop/MegamanCompanion/scripts"
    echo "  - /Users/pcpos/Desktop/MegamanCompanion/PCPOScompanion"
    exit 1
fi

echo "âœ… In correct directory"
echo ""

# Instructions for adding Firebase via Xcode
echo "ğŸ“¦ STEP 1: Add Firebase SDK via Xcode"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo ""
echo "1. Open PCPOScompanion.xcodeproj in Xcode"
echo "2. In Xcode menu: File â†’ Add Package Dependencies..."
echo "3. Paste this URL:"
echo "   https://github.com/firebase/firebase-ios-sdk"
echo ""
echo "4. Set 'Dependency Rule' to: 'Up to Next Major Version' (11.0.0)"
echo "5. Click 'Add Package'"
echo ""
echo "6. When prompted, SELECT these products:"
echo "   âœ… FirebaseAuth"
echo "   âœ… FirebaseFirestore"
echo "   âœ… FirebaseStorage"
echo "   âœ… FirebaseAnalytics"
echo ""
echo "7. Click 'Add Package' again"
echo ""
echo "â³ This will take 2-3 minutes to download and integrate..."
echo ""
read -p "Press ENTER when you've completed Step 1..."

echo ""
echo "ğŸ“¦ STEP 2: Add Facebook SDK via Xcode"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo ""
echo "1. In Xcode menu: File â†’ Add Package Dependencies..."
echo "2. Paste this URL:"
echo "   https://github.com/facebook/facebook-ios-sdk"
echo ""
echo "3. Set 'Dependency Rule' to: 'Up to Next Major Version' (17.0.0)"
echo "4. Click 'Add Package'"
echo ""
echo "5. When prompted, SELECT these products:"
echo "   âœ… FacebookLogin"
echo "   âœ… FacebookCore"
echo ""
echo "6. Click 'Add Package'"
echo ""
read -p "Press ENTER when you've completed Step 2..."

echo ""
echo "âœ… SDKs should now be installed!"
echo ""
echo "ğŸ“ NEXT STEPS:"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
echo "1. Make sure GoogleService-Info.plist is in your project"
echo "2. Build the project (Cmd+B)"
echo "3. Tell the agent: 'SDKs installed successfully'"
echo ""
echo "The agent will then:"
echo "  - Initialize Firebase in AppDelegate"
echo "  - Configure Facebook Login"
echo "  - Activate CloudSyncManager"
echo "  - Test the integration"
echo ""
echo "ğŸš€ You're almost there!"
